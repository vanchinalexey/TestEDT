# Инструкция для проведению автоматизированного сценарного тестирования с помощью Vanessa Automation

Vanessa Automation – инструмент тестирования (обработка) прикладных решений на платформе «1С: Предприятие». Представляет набор обработок, состоящая из фреймворков для удобного и гибкого тестирования конфигураций. 

## Подготовка
1. Скачать Vanessa Automation. Это open source программа расположена на github по  [адресу](https://pr-mex.github.io/vanessa-automation/dev/).
2. Распаковать каталог с программой в удобное для вас место.
3.	Создать пустую информационную базу, которая будет использоваться в качестве «менеджера тестирования» для ваших тестируемых конфигураций.
4.	Запустить информационную базу в режиме «Конфигуратор». Во вкладке «Администрирование – Загрузить информационную базу» выбрать файл информационной базы, предварительно скопированный из раздела «Releases» репозитория - «DIPLOMONECMID53DEMO.dt»;
5.	Во всплывающих окнах нажать «Да», «Да», «Войти»; 
6.	В настройках Администрирование – Пользователи – снимите флаг «Защита от опасных действий» у пользователей Менеджер, Специалист, ИТ-Бухгалтер. Закрыть программу.
7.	Запустить информационную базу в режиме «1С Предприятие» под пользователем «Администратор», при запуске нажать «Информационная база перемещена». Закрыть программу;
8.	У созданной информационной базы прописать Дополнительные параметры запуска: /TESTMANAGER /N "Администратор" /P "" /Execute "C:\VA\vanessa-automation-single.epf" где:
- /TESTMANAGER - ключ запуска информационной базы в качестве менеджера тестирования;
- /N "" - имя пользователя запускаемой конфигурации;
- /P "" - пароль пользователя, указанного в ключе /N;
- /Execute - путь к файлу, запускаемой обработки.
9.	Запустить настроенную информационную базу в режиме «1С Предприятие», ожидать, когда появится интерфейс обработки тестирования Vanessa Automaition. 
10. На вопрос:

   ![Вопрос](/Pict/6.png)
   
   ответить «ОК»

11. Перейти на вкладку справа: «Клиенты тестирования» убедится, что тестовая база прописана как клиент тестирования. При необходимости пропишите ее (заполнив «путь к инфобазе» - это путь к информационной безе тестирования и «Доп.параметры» -  имя пользователей запускаемой конфигурации), как показано на картинке:

   ![Клиент тестирования](/Pict/7.png)

## Запуск сценариев тестирования
1. На github в папке проекта /VAFeatures лежат четыре feature-файла для проведения сценарного тестирования (запускать тесты следует в указанной очередности):
- 1_СозданиеДокументовОбслуживаниеОтИмениМенеджер.feature - запускается под пользователем с правами «Менеджер» и создает три документа «Обслуживание клиента»;
- 2_ЗакрытиеОбслуживанийОтИмениСпециалист.feature - запускается под пользователем с правами «Специалист» и заполняет табличные части у документов «Обслуживание клиента», созданных менеджером;
- 3_МассовоеСозданиеАктовОтИмениИТБухгалтер.feature - запускается под пользователем с правами «Бухгалтер ИТ-фирмы» и запускает обработку, которая массово создает документы «Реализация товаров и услуг» на основе документов «Обслуживание клиента»;
- 4_ФормированиеОтчетаОтИмениИТБухгалтер.feature - запускается под пользователем с правами «Бухгалтер ИТ-фирмы» и запускает на выполнение отчет: «Анализ выставленных актов». 
2.	Скачать файлы сценариев тестирования;
3. Открыть в запущеной обработке Vanessa Automaition вкладку «Запуск сценариев», нажмите в верхней панели на пиктограмму ![Пиктограмма - открыть](/Pict/8.png) и откройте первый скачанный файл сценария как показано на картинке.
   
   ![Картинка - Открыть сценарий](/Pict/9.png)
4. Запустить сценарий на выполнение нажав в верхней панели инструментов на пиктограмму ![Запуск](/Pict/10.png).
5. В случае успеха все строчки кода сценария будут подсвечены зеленым цветом и внизу экрана будет сообщение об успешном завершении сценария: «Выполнение сценариев закончено. Ошибок не было»:.
   ![Сообщение](/Pict/11.png)
6. Повторите эти действия с оставшимися тремя файлами сценариев, чтобы завершить тестирование.
